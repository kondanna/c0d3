<style type="text/css">
    #inputContainer {
        position: fixed;
        top: 0;
        left: 160;
        height: 30px;
        display: flex;
    }
    #inputContainer input {
        padding: auto;
        width: 100%;
    }
    #inputContainer button {
        width: 100%;
    }
    #editor {
        position: fixed;
        top: 30;
        left: 160;
        right: 0;
        bottom: 0;
    }
    #sidebar {
        height: 100%;
        width: 160px;
        position: fixed;
        top: 0;
        left: 0;
    }
</style>
<div id="inputContainer"><input type="text" id="fileName"><button id="createNewFile">New File</button></div>
<div id="sidebar"></div><!-- Side navigation -->
<div id="editor"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.min.js" type="text/javascript" charset="utf-8"></script>
<script>
    const $fileNameInput = document.querySelector('#fileName')
    const $createNewFile = document.querySelector('#createNewFile')
    const $sidebar = document.querySelector('#sidebar')
    const $editor = ace.edit('editor')
    $editor.setTheme('ace/theme/textmate')

    $createNewFile.onclick = () => {
        fetch('https://localhost:3000/api/files', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                name: $fileNameInput.value,
                content: $editor.getValue()
            })
        })
    }

    $sidebar.querySelectorAll('.fileNameContainer').forEach(el => {
        el.onclick = (e) => {
            fetch(`https://localhost:3000/api/files/${e.target.id}`)
                .then(r => r.json()).then(file => {
                    $editor.setValue(file.content)
                })
        }
    })

    (function() {
        fetch('https://localhost:3000/api/files')
            .then(r => r.json()).then(fileNamesArray => {
                fileNamesArray.forEach(fileName => {
                    const fileNameContainer= document.createElement('div')
                    fileNameContainer.classList.add('fileNameContainer')
                    fileNameContainer.id = fileName
                    fileNameContainer.innerHTML = `<a href="/${fileName}">${fileName}</a>`
                    $sidebar.append(fileNameContainer)
                })
            })
    })()
</script>